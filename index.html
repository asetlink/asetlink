<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>ASETLINK</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #121212; color: white; }
    input { padding: 10px; width: 100%; font-size: 16px; margin-bottom: 20px; background: #222; color: white; border: none; border-radius: 5px; }
    .result { margin-top: 20px; }
    .item { padding: 10px; background: #1e1e1e; margin-bottom: 10px; border-left: 5px solid #00ffa2; border-radius: 5px; }
    a { color: #00ffa2; text-decoration: none; }
  </style>
</head>
<body>

<h2>ASETLINK Finder</h2>
<input type="text" id="search" placeholder="Cari kode atau judul...">
<div class="result" id="result">Silakan masukkan kode atau judul di atas.</div>

<script>
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSFl8lDZYVTd3xNTxxdDICGkP7BfRtZqwzxIUp1vmjQM-V4M7OdZmON3bOAFA-rwQW8UsGiHPxPBbqs/pub?output=csv";

let data = [];

function normalize(text) {
  return text.toLowerCase().replace(/[^a-z0-9]/gi, '');
}

fetch(sheetURL)
  .then(res => res.text())
  .then(text => {
    const rows = text.trim().split("\n").slice(1); // buang header
    data = rows.map(row => {
      const [judul, link] = row.split(",");
      return { judul: judul.trim(), link: link.trim() };
    });
  });

document.getElementById("search").addEventListener("input", function() {
  const keyword = this.value.trim().toLowerCase();
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = '';

  if (keyword === '') {
    resultDiv.innerHTML = 'Silakan masukkan kode atau judul di atas.';
    return;
  }

  const found = data.filter(item =>
    item.judul.toLowerCase().includes(keyword)
  );

  if (found.length > 0) {
    found.forEach(item => {
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `<strong>${item.judul}</strong><br><a href="${item.link}" target="_blank">${item.link}</a>`;
      resultDiv.appendChild(div);
    });
  } else {
    resultDiv.innerHTML = '<i>Tidak ditemukan. Rekomendasi:</i><br>';
    const rekomendasi = data.slice(0, 5); // ambil 5 data awal saja
    rekomendasi.forEach(item => {
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `<strong>${item.judul}</strong><br><a href="${item.link}" target="_blank">${item.link}</a>`;
      resultDiv.appendChild(div);
    });
  }
});
</script>

</body>
</html>
